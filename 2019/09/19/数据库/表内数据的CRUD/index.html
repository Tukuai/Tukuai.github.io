<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>表内数据的CRUD | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="DML：增删改表中的工具DML（Data Manipulation Language)数据操作语言用来对数据库中表的数据进行增删改。关键字：insert,delete,update等 1.添加数据语法：    insert into 表名 （列名1，列名2，…列名n）values（值1，…值n），（值1，…值n）….；注意：1.列名要和值一一对应2.如果表名后不定义列名，则默认给所有列添加值；3.">
<meta property="og:type" content="article">
<meta property="og:title" content="表内数据的CRUD">
<meta property="og:url" content="https://tukuai.github.io/2019/09/19/%E6%95%B0%E6%8D%AE%E5%BA%93/%E8%A1%A8%E5%86%85%E6%95%B0%E6%8D%AE%E7%9A%84CRUD/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="DML：增删改表中的工具DML（Data Manipulation Language)数据操作语言用来对数据库中表的数据进行增删改。关键字：insert,delete,update等 1.添加数据语法：    insert into 表名 （列名1，列名2，…列名n）values（值1，…值n），（值1，…值n）….；注意：1.列名要和值一一对应2.如果表名后不定义列名，则默认给所有列添加值；3.">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://tukuai.github.io/images/237.png">
<meta property="article:published_time" content="2019-09-19T05:21:35.000Z">
<meta property="article:modified_time" content="2020-04-20T09:10:11.738Z">
<meta property="article:author" content="Tukuai">
<meta property="article:tag" content="数据库">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://tukuai.github.io/images/237.png">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://Tukuai.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-数据库/表内数据的CRUD" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/09/19/%E6%95%B0%E6%8D%AE%E5%BA%93/%E8%A1%A8%E5%86%85%E6%95%B0%E6%8D%AE%E7%9A%84CRUD/" class="article-date">
  <time datetime="2019-09-19T05:21:35.000Z" itemprop="datePublished">2019-09-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      表内数据的CRUD
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="DML：增删改表中的工具"><a href="#DML：增删改表中的工具" class="headerlink" title="DML：增删改表中的工具"></a>DML：增删改表中的工具</h1><p><strong>DML（Data Manipulation Language)数据操作语言</strong><br>用来对数据库中表的数据进行增删改。关键字：insert,delete,update等</p>
<h2 id="1-添加数据"><a href="#1-添加数据" class="headerlink" title="1.添加数据"></a><strong>1.添加数据</strong></h2><p><strong>语法：</strong><br>    insert into 表名 （列名1，列名2，…列名n）values（值1，…值n），（值1，…值n）….；<br><strong>注意：</strong><br>1.列名要和值一一对应<br>2.如果表名后不定义列名，则默认给所有列添加值；<br>3.除了数字类型外，其他的都需要添加单引或者双引号（都可以）</p>
<h2 id="2-删除数据："><a href="#2-删除数据：" class="headerlink" title="2.删除数据："></a><strong>2.删除数据：</strong></h2><p><strong>语法：</strong><br>    delete from 表名 where 条件;  where 为可选<br><strong>注意：</strong><br>如果不加条件，则会删除掉所有数据(记录）；<br>如果想要删除所有记录，则不推荐delete from 表名；因为速度太慢；<br><strong>truncate table 表名</strong>：先删除表，再创建一样的空表；</p>
<h2 id="3-修改数据："><a href="#3-修改数据：" class="headerlink" title="3.修改数据："></a><strong>3.修改数据：</strong></h2><p><strong>语法：</strong><br>    update 表名 set 列名1=值1，列名2=值2… where 条件；where 为可选<br><strong>注意：</strong><br>如果不加任何条件则会改掉所有的数据（记录)；</p>
<h1 id="DQL：查询表中的记录（数据）"><a href="#DQL：查询表中的记录（数据）" class="headerlink" title="DQL：查询表中的记录（数据）"></a><strong>DQL：查询表中的记录（数据）</strong></h1><p><strong>DQL（Data Query Language）数据查询语言</strong><br>用来查询数据库中表的记录（数据）。关键字：select where等</p>
<h1 id="第一部分"><a href="#第一部分" class="headerlink" title="第一部分"></a><strong>第一部分</strong></h1><ul>
<li>select * from 表名;</li>
</ul>
<h3 id="1-语法："><a href="#1-语法：" class="headerlink" title="1. 语法："></a><strong>1. 语法：</strong></h3><pre><code>select
    字段列表
from
    表名列表
where
    条件列表
group by
    分组字段
having
    分组之后的条件
order by
    排序
limit
    分页限定</code></pre><h3 id="2-基础查询"><a href="#2-基础查询" class="headerlink" title="2. 基础查询"></a><strong>2. 基础查询</strong></h3><p>1.多个字段的查询<br>    select 字段名1，字段名2… from 表名；<br>    注意：如果查询所有字段，则可以使用* 来替代字段列表。<br>2.去除重复：distinct<br>3.计算列</p>
<ul>
<li>一般可以使用四则运算计算一些列的值。（一般只会进行数值型的计算）</li>
<li>ifnull(表达式1,表达式2),null参与的运算，计算结果都为null<ul>
<li>表达式1：哪个字段需要判断是否为null</li>
<li>如果该字段为null后的替换值。</li>
</ul>
</li>
</ul>
<p>4.起别名：as,as也可以省略</p>
<h3 id="3-条件查询"><a href="#3-条件查询" class="headerlink" title="3. 条件查询"></a><strong>3. 条件查询</strong></h3><p>1.where子句后跟条件<br>2.运算符</p>
<pre><code>&gt; 、&lt; 、&lt;= 、&gt;= 、= 、&lt;&gt;
BETWEEN...AND  
IN( 集合) 
LIKE：模糊查询
    占位符：
        _:单个任意字符
        %：多个任意字符
IS NULL  
and  或 &amp;&amp;
or  或 || 
not  或 !</code></pre><p><strong>例</strong></p>
<pre><code>//查询年龄大于20岁
SELECT * FROM student WHERE age &gt; 20;

SELECT * FROM student WHERE age &gt;= 20;

//查询年龄等于20岁
SELECT * FROM student WHERE age = 20;

//查询年龄不等于20岁
SELECT * FROM student WHERE age != 20;
SELECT * FROM student WHERE age &lt;&gt; 20;

//查询年龄大于等于20 小于等于30

SELECT * FROM student WHERE age &gt;= 20 &amp;&amp;  age &lt;=30;
SELECT * FROM student WHERE age &gt;= 20 AND  age &lt;=30;
SELECT * FROM student WHERE age BETWEEN 20 AND 30;

//查询年龄22岁，18岁，25岁的信息
SELECT * FROM student WHERE age = 22 OR age = 18 OR age = 25
SELECT * FROM student WHERE age IN (22,18,25);

//查询英语成绩为null
错误示范：SELECT * FROM student WHERE english = NULL; //不对的。null值不能使用 = （!=） 判断

正确示范：SELECT * FROM student WHERE english IS NULL;

//查询英语成绩不为null
SELECT * FROM student WHERE english  IS NOT NULL;

//查询姓马的有哪些？ like
SELECT * FROM student WHERE NAME LIKE &apos;马%&apos;;

//查询姓名第二个字是化的人        
SELECT * FROM student WHERE NAME LIKE &quot;_化%&quot;;

//查询姓名是3个字的人
SELECT * FROM student WHERE NAME LIKE &apos;___&apos;;

//查询姓名中包含德的人
SELECT * FROM student WHERE NAME LIKE &apos;%德%&apos;;</code></pre><h1 id="第二部分"><a href="#第二部分" class="headerlink" title="第二部分"></a><strong>第二部分</strong></h1><h2 id="1-排序查询"><a href="#1-排序查询" class="headerlink" title="1. 排序查询"></a><strong>1. 排序查询</strong></h2><ul>
<li><p>语法：order by 子句</p>
<ul>
<li>order by 排序字段1 排序方式1 ，  排序字段2 排序方式2…</li>
</ul>
</li>
<li><p>排序方式：</p>
<ul>
<li>ASC：升序，默认的。</li>
<li>DESC：降序。</li>
</ul>
</li>
<li><p>注意：</p>
<ul>
<li><p>如果有多个排序条件，则当前边的条件值一样时，才会判断第二条件。<br>  例如SELECT age,NAME FROM student ORDER BY age ASC name DESC;<br>  只有当age排完序之后，且有age相同的部分才去进行name的排序。</p>
<p>  SELECT age,NAME FROM student ORDER BY age ASC;<br>  SELECT age,name FROM student ORDER BY age ASC,name DESC;<br>  SELECT * FROM student WHERE gender = ‘male’ ORDER BY age ASC;</p>
</li>
</ul>
</li>
</ul>
<h2 id="2-聚合函数：将一列数据作为一个整体，进行纵向的计算。"><a href="#2-聚合函数：将一列数据作为一个整体，进行纵向的计算。" class="headerlink" title="2. 聚合函数：将一列数据作为一个整体，进行纵向的计算。"></a><strong>2. 聚合函数：将一列数据作为一个整体，进行纵向的计算。</strong></h2><p>1.count：计算个数一般选择非空的列：主键,count(* )<br>2.max：计算最大值<br>3.min：计算最小值<br>4.sum：计算和<br>5.avg：计算平均值</p>
<ul>
<li><p>注意：聚合函数的计算，排除null值。<br>  解决方案：</p>
<pre><code>1.选择不包含非空的列进行计算
2.IFNULL函数

SELECT COUNT(* ) FROM student;
SELECT COUNT(* ) AS total FROM student;
SELECT name,COUNT(* ) FROM student GROUP BY name;  
SELECT name,SUM(grade) FROM student GROUP BY name; 
//若此语句没有GROUP BY name，则查询结果为第一个name，和所有name的grade总和
//一般来说多列聚合函数查询必须配合GROUP BY来查询。
SELECT NAME,AVG(grade) FROM student GROUP BY NAME;
SELECT NAME,MAX(grade)  FROM student GROUP BY NAME;
SELECT NAME,MIN(grade)  FROM student GROUP BY NAME;</code></pre></li>
</ul>
<h2 id="3-分组查询"><a href="#3-分组查询" class="headerlink" title="3. 分组查询:"></a><strong>3. 分组查询:</strong></h2><p><strong>语法：</strong>group by 分组字段；<br><strong>注意：</strong><br>1.分组之后查询的字段：分组字段、聚合函数<br>2.where 和 having 的区别？<br>    * where 在分组之前进行限定，如果不满足条件，则不参与分组。having在分组之后进行限定，如果不满足结果，则不会被查询出来<br>    * where 后不可以跟聚合函数，having可以进行聚合函数的判断。</p>
<pre><code>//按照性别分组。分别查询男、女同学的平均分
SELECT sex , AVG(math) FROM student GROUP BY sex;

//按照性别分组。分别查询男、女同学的平均分,人数        
SELECT sex , AVG(math),COUNT(id) FROM student GROUP BY sex;

// 按照性别分组。分别查询男、女同学的平均分,人数 要求：分数低于70分的人，不参与分组
SELECT sex , AVG(math),COUNT(id) FROM student WHERE math &gt; 70 GROUP BY sex;

// 按照性别分组。分别查询男、女同学的平均分,人数 要求：分数低于70分的人，不参与分组,分组之后。人数要大于2个人
SELECT sex , AVG(math),COUNT(id) FROM student WHERE math &gt; 70 GROUP BY sex HAVING COUNT(id) &gt; 2;

SELECT sex , AVG(math),COUNT(id) 人数 FROM student WHERE math &gt; 70 GROUP BY sex HAVING 人数 &gt; 2;</code></pre><h2 id="4-分页查询"><a href="#4-分页查询" class="headerlink" title="4. 分页查询"></a><strong>4. 分页查询</strong></h2><p>1.语法：limit 开始的索引,每页查询的条数;<br>2.公式：开始的索引 = （当前的页码 - 1） * 每页显示的条数</p>
<pre><code>//每页显示3条记录 
SELECT * FROM student LIMIT 0,3; //第1页    
SELECT * FROM student LIMIT 3,3; //第2页    
SELECT * FROM student LIMIT 6,3; //第3页</code></pre><p>3.limit 是一个MySQL”方言”</p>
<h1 id="第三部分：多表查询"><a href="#第三部分：多表查询" class="headerlink" title="第三部分：多表查询"></a><strong>第三部分：多表查询</strong></h1><h2 id="查询语法："><a href="#查询语法：" class="headerlink" title="查询语法："></a><strong>查询语法：</strong></h2><pre><code>select
    列名列表
from
    表名列表
where....</code></pre><h3 id="笛卡尔积："><a href="#笛卡尔积：" class="headerlink" title="笛卡尔积："></a><strong>笛卡尔积：</strong></h3><ul>
<li>有两个集合A,B .取这两个集合的所有组成情况。</li>
<li>要完成多表查询，需要消除无用的数据</li>
</ul>
<h3 id="准备sql"><a href="#准备sql" class="headerlink" title="准备sql"></a><strong>准备sql</strong></h3><pre><code># 创建部门表
CREATE TABLE dept(
    id INT PRIMARY KEY AUTO_INCREMENT,
    NAME VARCHAR(20)
);
INSERT INTO dept (NAME) VALUES (&apos;开发部&apos;),(&apos;市场部&apos;),(&apos;财务部&apos;);
# 创建员工表
CREATE TABLE emp (
    id INT PRIMARY KEY AUTO_INCREMENT,
    NAME VARCHAR(10),
    gender CHAR(1), //性别
    salary DOUBLE, //工资
    join_date DATE, //入职日期
    dept_id INT,
    FOREIGN KEY (dept_id) REFERENCES dept(id) //外键，关联部门表(部门表的主键)
);</code></pre><h2 id="多表查询的分类："><a href="#多表查询的分类：" class="headerlink" title="多表查询的分类："></a><strong>多表查询的分类：</strong></h2><h3 id="1-内连接查询："><a href="#1-内连接查询：" class="headerlink" title="1.内连接查询："></a><strong>1.内连接查询：</strong></h3><p>1.隐式内连接：使用where条件消除无用数据,也称为多表联合查询<br>    * 例子：</p>
<pre><code>//查询所有员工信息和对应的部门信息
SELECT * FROM emp,dept WHERE emp.`dept_id` = dept.`id`;
//查询员工表的名称，性别。部门表的名称
SELECT emp.name,emp.gender,dept.name FROM emp,dept WHERE emp.`dept_id` = dept.`id`;

SELECT 
    t1.name, //员工表的姓名
    t1.gender,//员工表的性别
    t2.name //部门表的名称
FROM
    emp t1,
    dept t2
WHERE 
    t1.`dept_id` = t2.`id`;</code></pre><p>2.显式内连接：<br>    * 语法： select 字段列表 from 表名1 [inner] join 表名2 on 条件<br>    * 例如：</p>
<pre><code>SELECT * FROM emp INNER JOIN dept ON emp.`dept_id` = dept.`id`;    
SELECT * FROM emp JOIN dept ON emp.`dept_id` = dept.`id`;    </code></pre><p>3.内连接查询：<br>    1. 从哪些表中查询数据<br>    2. 条件是什么<br>    3. 查询哪些字段</p>
<h3 id="2-外链接查询："><a href="#2-外链接查询：" class="headerlink" title="2. 外链接查询："></a><strong>2. 外链接查询：</strong></h3><p>1.左外连接：<br>    * 语法：select 字段列表 from 表1 left [outer] join 表2 on 条件；<br>    * 查询的是左表所有数据以及其交集部分。<br>    <img src="/images/237.png" alt=""><br>    * 例子：</p>
<pre><code>//查询所有员工信息，如果员工有部门，则查询部门名称，没有部门，则不显示部门名称
SELECT     t1.*,t2.`name` FROM emp t1 LEFT JOIN dept t2 ON t1.`dept_id` = t2.`id`;
//效果:人员表中的数据全部都显示,而 部门表中的数据符合条件的才会显示,不符合条件的会以 null 进行填充.</code></pre><p>2.右外连接：</p>
<pre><code>* 语法：select 字段列表 from 表1 right [outer] join 表2 on 条件；
* 查询的是右表所有数据以及其交集部分。
* 例子：
    SELECT     * FROM dept t2 RIGHT JOIN emp t1 ON t1.`dept_id` = t2.`id`;</code></pre><h3 id="3-子查询："><a href="#3-子查询：" class="headerlink" title="3. 子查询："></a><strong>3. 子查询：</strong></h3><p><strong>概念：</strong>查询中嵌套查询，称嵌套查询为子查询。</p>
<pre><code>//查询工资最高的员工信息
//1 查询最高的工资是多少 9000
SELECT MAX(salary) FROM emp;
//2 查询员工信息，并且工资等于9000的
SELECT * FROM emp WHERE emp.`salary` = 9000;

//一条sql就完成这个操作。子查询
SELECT * FROM emp WHERE emp.`salary` = (SELECT MAX(salary) FROM emp);</code></pre><p><strong>子查询不同情况</strong><br>1.子查询的结果是单行单列的：子查询可以作为条件，使用运算符去判断。 运算符： &gt; &gt;= &lt; &lt;= =</p>
<pre><code>//查询员工工资小于平均工资的人
SELECT * FROM emp WHERE emp.salary &lt; (SELECT AVG(salary) FROM emp);</code></pre><p>2.子查询的结果是多行单列的：子查询可以作为条件，使用运算符in来判断</p>
<pre><code>//查询&apos;财务部&apos;和&apos;市场部&apos;所有的员工信息
SELECT id FROM dept WHERE NAME = &apos;财务部&apos; OR NAME = &apos;市场部&apos;;
SELECT * FROM emp WHERE dept_id = 3 OR dept_id = 2;
//子查询
SELECT * FROM emp WHERE dept_id IN (SELECT id FROM dept WHERE NAME = &apos;财务部&apos; OR NAME = &apos;市场部&apos;);</code></pre><p>3.子查询的结果是多行多列的：子查询可以作为一张虚拟表参与查询</p>
<pre><code>//查询员工入职日期是2011-11-11日之后的员工信息和部门信息
//子查询
SELECT * FROM dept t1 ,(SELECT * FROM emp WHERE emp.`join_date` &gt; &apos;2011-11-11&apos;) t2 WHERE t1.id = t2.dept_id;    
//普通内连接
SELECT * FROM emp t1,dept t2 WHERE t1.`dept_id` = t2.`id` AND t1.`join_date` &gt;  &apos;2011-11-11&apos;</code></pre><p><strong>多表查询练习</strong></p>
<pre><code>//部门表
CREATE TABLE dept (
  id INT PRIMARY KEY PRIMARY KEY, //部门id
  dname VARCHAR(50), //部门名称
  loc VARCHAR(50) //部门所在地
);

//添加4个部门
INSERT INTO dept(id,dname,loc) VALUES 
(10,&apos;教研部&apos;,&apos;北京&apos;),
(20,&apos;学工部&apos;,&apos;上海&apos;),
(30,&apos;销售部&apos;,&apos;广州&apos;),
(40,&apos;财务部&apos;,&apos;深圳&apos;);



//职务表，职务名称，职务描述
CREATE TABLE job (
  id INT PRIMARY KEY,
  jname VARCHAR(20),
  description VARCHAR(50)
);

//添加4个职务
INSERT INTO job (id, jname, description) VALUES
(1, &apos;董事长&apos;, &apos;管理整个公司，接单&apos;),
(2, &apos;经理&apos;, &apos;管理部门员工&apos;),
(3, &apos;销售员&apos;, &apos;向客人推销产品&apos;),
(4, &apos;文员&apos;, &apos;使用办公软件&apos;);



//员工表
CREATE TABLE emp (
  id INT PRIMARY KEY, //员工id
  ename VARCHAR(50), //员工姓名
  job_id INT, //职务id
  mgr INT , //上级领导
  joindate DATE, //入职日期
  salary DECIMAL(7,2), //工资
  bonus DECIMAL(7,2), //奖金
  dept_id INT, //所在部门编号
  CONSTRAINT emp_jobid_ref_job_id_fk FOREIGN KEY (job_id) REFERENCES job (id),
  CONSTRAINT emp_deptid_ref_dept_id_fk FOREIGN KEY (dept_id) REFERENCES dept (id)
);

//添加员工
INSERT INTO emp(id,ename,job_id,mgr,joindate,salary,bonus,dept_id) VALUES 
(1001,&apos;孙悟空&apos;,4,1004,&apos;2000-12-17&apos;,&apos;8000.00&apos;,NULL,20),
(1002,&apos;卢俊义&apos;,3,1006,&apos;2001-02-20&apos;,&apos;16000.00&apos;,&apos;3000.00&apos;,30),
(1003,&apos;林冲&apos;,3,1006,&apos;2001-02-22&apos;,&apos;12500.00&apos;,&apos;5000.00&apos;,30),
(1004,&apos;唐僧&apos;,2,1009,&apos;2001-04-02&apos;,&apos;29750.00&apos;,NULL,20),
(1005,&apos;李逵&apos;,4,1006,&apos;2001-09-28&apos;,&apos;12500.00&apos;,&apos;14000.00&apos;,30),
(1006,&apos;宋江&apos;,2,1009,&apos;2001-05-01&apos;,&apos;28500.00&apos;,NULL,30),
(1007,&apos;刘备&apos;,2,1009,&apos;2001-09-01&apos;,&apos;24500.00&apos;,NULL,10),
(1008,&apos;猪八戒&apos;,4,1004,&apos;2007-04-19&apos;,&apos;30000.00&apos;,NULL,20),
(1009,&apos;罗贯中&apos;,1,NULL,&apos;2001-11-17&apos;,&apos;50000.00&apos;,NULL,10),
(1010,&apos;吴用&apos;,3,1006,&apos;2001-09-08&apos;,&apos;15000.00&apos;,&apos;0.00&apos;,30),
(1011,&apos;沙僧&apos;,4,1004,&apos;2007-05-23&apos;,&apos;11000.00&apos;,NULL,20),
(1012,&apos;李逵&apos;,4,1006,&apos;2001-12-03&apos;,&apos;9500.00&apos;,NULL,30),
(1013,&apos;小白龙&apos;,4,1004,&apos;2001-12-03&apos;,&apos;30000.00&apos;,NULL,20),
(1014,&apos;关羽&apos;,4,1007,&apos;2002-01-23&apos;,&apos;13000.00&apos;,NULL,10);



//工资等级表
CREATE TABLE salarygrade (
  grade INT PRIMARY KEY,   //级别
  losalary INT,  //最低工资
  hisalary INT //最高工资
);

//添加5个工资等级
INSERT INTO salarygrade(grade,losalary,hisalary) VALUES 
(1,7000,12000),
(2,12010,14000),
(3,14010,20000),
(4,20010,30000),
(5,30010,99990);

//需求：

//1.查询所有员工信息。查询员工编号，员工姓名，工资，职务名称，职务描述
/*
    分析：
        1.员工编号，员工姓名，工资，需要查询emp表  职务名称，职务描述 需要查询job表
        2.查询条件 emp.job_id = job.id

*/
SELECT 
    t1.`id`, //员工编号
    t1.`ename`, //员工姓名
    t1.`salary`,//工资
    t2.`jname`, //职务名称
    t2.`description` //职务描述
FROM 
    emp t1, job t2
WHERE 
    t1.`job_id` = t2.`id`;



//2.查询员工编号，员工姓名，工资，职务名称，职务描述，部门名称，部门位置
/*
    分析：
        1. 员工编号，员工姓名，工资 emp  职务名称，职务描述 job  部门名称，部门位置 dept
        2. 条件： emp.job_id = job.id and emp.dept_id = dept.id
*/

SELECT 
    t1.`id`, //员工编号
    t1.`ename`, //员工姓名
    t1.`salary`,//工资
    t2.`jname`, //职务名称
    t2.`description`, //职务描述
    t3.`dname`, //部门名称
    t3.`loc` //部门位置
FROM 
    emp t1, job t2,dept t3
WHERE 
    t1.`job_id` = t2.`id` AND t1.`dept_id` = t3.`id`;

//3.查询员工姓名，工资，工资等级
/*
    分析：
        1.员工姓名，工资 emp  工资等级 salarygrade
        2.条件 emp.salary &gt;= salarygrade.losalary and emp.salary &lt;= salarygrade.hisalary
            emp.salary BETWEEN salarygrade.losalary and salarygrade.hisalary
*/
SELECT 
    t1.ename ,
    t1.`salary`,
    t2.*
FROM emp t1, salarygrade t2
WHERE t1.`salary` BETWEEN t2.`losalary` AND t2.`hisalary`;



//4.查询员工姓名，工资，职务名称，职务描述，部门名称，部门位置，工资等级
/*
    分析：
        1. 员工姓名，工资 emp ， 职务名称，职务描述 job 部门名称，部门位置，dept  工资等级 salarygrade
        2. 条件： emp.job_id = job.id and emp.dept_id = dept.id and emp.salary BETWEEN salarygrade.losalary and salarygrade.hisalary

*/
SELECT 
    t1.`ename`,
    t1.`salary`,
    t2.`jname`,
    t2.`description`,
    t3.`dname`,
    t3.`loc`,
    t4.`grade`
FROM 
    emp t1,job t2,dept t3,salarygrade t4
WHERE 
    t1.`job_id` = t2.`id` 
    AND t1.`dept_id` = t3.`id`
    AND t1.`salary` BETWEEN t4.`losalary` AND t4.`hisalary`;



//5.查询出部门编号、部门名称、部门位置、部门人数

/*
    分析：
        1.部门编号、部门名称、部门位置 dept 表。 部门人数 emp表
        2.使用分组查询。按照emp.dept_id完成分组，查询count(id)
        3.使用子查询将第2步的查询结果和dept表进行关联查询

*/
SELECT 
    t1.`id`,t1.`dname`,t1.`loc` , t2.total
FROM 
    dept t1,
    (SELECT
        dept_id,COUNT(id) total
    FROM 
        emp
    GROUP BY dept_id) t2
WHERE t1.`id` = t2.dept_id;


//6.查询所有员工的姓名及其直接上级的姓名,没有领导的员工也需要查询

/*
    分析：
        1.姓名 emp， 直接上级的姓名 emp
            * emp表的id 和 mgr 是自关联
        2.条件 emp.id = emp.mgr
        3.查询左表的所有数据，和 交集数据
            * 使用左外连接查询

*/
/*
select
    t1.ename,
    t1.mgr,
    t2.`id`,
    t2.ename
from emp t1, emp t2
where t1.mgr = t2.`id`;

*/

SELECT 
    t1.ename,
    t1.mgr,
    t2.`id`,
    t2.`ename`
FROM emp t1
LEFT JOIN emp t2
ON t1.`mgr` = t2.`id`;</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://tukuai.github.io/2019/09/19/%E6%95%B0%E6%8D%AE%E5%BA%93/%E8%A1%A8%E5%86%85%E6%95%B0%E6%8D%AE%E7%9A%84CRUD/" data-id="ckb22iug100a0zwu88d9a6uvn" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/09/21/Java%E8%BF%9B%E9%98%B6/Junit%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Junit单元测试
        
      </div>
    </a>
  
  
    <a href="/2019/09/15/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%92%8C%E8%A1%A8%E7%9A%84CRUD/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">数据库和表的CRUD</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Git/">Git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/IO/">IO</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JVM/">JVM</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java%E5%9F%BA%E7%A1%80/">Java基础</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java%E8%BF%9B%E9%98%B6/">Java进阶</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/LeetCode/">LeetCode</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Redis/">Redis</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Web/">Web</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%A4%9A%E7%BA%BF%E7%A8%8B/">多线程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/">并发编程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">数据结构</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AE%97%E6%B3%95/">算法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/">面向对象</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JVM/" rel="tag">JVM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LeetCode/" rel="tag">LeetCode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Web/" rel="tag">Web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" rel="tag">计算机网络</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JVM/" style="font-size: 12.86px;">JVM</a> <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/LeetCode/" style="font-size: 11.43px;">LeetCode</a> <a href="/tags/Web/" style="font-size: 18.57px;">Web</a> <a href="/tags/linux/" style="font-size: 10px;">linux</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 17.14px;">数据库</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 14.29px;">数据结构</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 15.71px;">算法</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" style="font-size: 11.43px;">计算机网络</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 14.29px;">设计模式</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/06/05/%E6%95%B0%E6%8D%AE%E5%BA%93/WHERE%E5%92%8CON%E7%9A%84%E5%8C%BA%E5%88%AB/">数据库/WHERE和ON的区别</a>
          </li>
        
          <li>
            <a href="/2020/06/05/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%B5%8B%E8%AF%95/">操作系统/测试</a>
          </li>
        
          <li>
            <a href="/2020/06/05/Java%E5%9F%BA%E7%A1%80/HashMap/">Java基础/HashMap</a>
          </li>
        
          <li>
            <a href="/2020/05/23/Redis/%E4%BC%81%E4%B8%9A%E7%BA%A7%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/">企业级解决方案</a>
          </li>
        
          <li>
            <a href="/2020/05/23/Redis/Redis%E9%9B%86%E7%BE%A4/">Redis集群</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Tukuai<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>